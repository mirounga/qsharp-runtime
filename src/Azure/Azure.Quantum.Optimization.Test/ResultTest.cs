using System.Text.Json;
using Microsoft.Azure.Quantum.Optimization;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Microsoft.Azure.Quantum.Optimization.Test
{
    [TestClass]
    public class ResultTest
    {
        private string stream = "{" +
            "\"version\": \"1.0\", " +
            "\"configuration\": {\"0\": 1, \"1\": 0, \"2\": 1, \"3\": 0, \"4\": 1, \"5\": 1, \"6\": 0, \"7\": 1, \"8\": 1, \"9\": 0, \"10\": 1, \"11\": 0, \"12\": 1, \"13\": 0, \"14\": 0, \"15\": 1, \"16\": 0, \"17\": 0}, " +
            "\"cost\": -1387.0, " +
            "\"parameters\": {" +
            "\"all_betas\": [0.0019047619047619048, 0.004161358043205629, 0.009091372900969896, 0.019862040316247203, 0.0019047619047619048, 0.00269576882469859, 0.003815264017013829, 0.0053996616424066, 0.007642025747748261, 0.010815595753369938, 0.015307081572550497, 0.02166378548270995, 0.030660292702854874, 0.0019047619047619048, 0.002381280313535361, 0.0029770103641063093, 0.003721775490949473, 0.0046528601216981, 0.0058168762099525505, 0.0072720967226419, 0.009091372900969891, 0.011365781338846444, 0.01420918345882487, 0.017763925642003773, 0.02220796537176503, 0.02776378014031601, 0.03470950511566573, 0.0019047619047619048, 0.0022453918738908774, 0.0026469369503509727, 0.003120290627485277, 0.0036782944900449863, 0.004336086592805416, 0.005111512139985543, 0.006025607606769506, 0.0071031714366350356, 0.008373436796903902, 0.00987086464366111, 0.01163607861105555, 0.01371696708754028, 0.01616998237721557, 0.019061672191148227, 0.02247048501640737, 0.02648889834056961, 0.03122592746817419, 0.036810082990665745, 0.0019047619047619048, 0.0021697336670484847, 0.0024715656976099236, 0.0028153856348238737, 0.0032070344237410653, 0.0036531655443015733, 0.004161358043205629, 0.004740245289667783, 0.0053996616424065984, 0.006150809519504954, 0.007006449709387911, 0.007981118155994036, 0.009091372900969895, 0.01035607537803648, 0.011796710838264248, 0.013437753349764285, 0.01530708157255049, 0.017436452371915635, 0.019862040316247196, 0.022625052224478838, 0.025772427203345518, 0.02935763406694387, 0.03344157968546726, 0.03809364369449257], " +
            "\"replicas\": 70, " +
            "\"sweeps\": 600}}";

        [TestMethod]
        public void TestParse()
        {
            Result result = JsonSerializer.Deserialize<Result>(stream);

            Assert.AreEqual(-1387.0f, result.Cost);
            Assert.AreEqual("1.0", result.Version);
        }
    }
}
